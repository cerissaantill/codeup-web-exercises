<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mapbox Maps API </title>

    <!--Exercise location: -->
    <!--https://gist.github.com/jreich5/bc0d5e719891d58f15d831518e2c57a7-->
</head>
<body>

<!-- The HTML element that serves as the Mapbox container -->
<div id='map' style='width: 400px; height: 300px;'></div>


<!-- Mapbox JS -->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
<script src="js/keys.js"></script>


<!-- Custom JS -->
<script>

    var token = mapboxglAccessToken;
    var searchPlace = 'San Antonio';

    // prevents from uploading token to github
    mapboxgl.accessToken = mapboxglAccessToken;

    geocode(searchPlace, token).then(function(results){

        var map = new mapboxgl
    })



//8.
    var eats = [
        {
            name: 'Silo',
            address: 'Silo: Elevated Cuisine, San Antonio, TX',
            message: 'It\'s great!'
        },
        {
            name: 'Bliss',
            address: 'Bliss, San Antonio, TX',
            message: 'It\'s awesome!'

        },
        {
            name: 'Liberty Bar',
            address: 'Liberty Bar, San Antonio, TX',
            message: 'It\'s super!'
        }
    ];

    function placeMarkerAndPopup(eatObj, token, map) {
        return geocode(info.address, token).then(function(coordinates){
            var popup = new mapboxgl.Popup()
                .setHTML('<h3>' + eatObj.name + '</h3><p>' + eatObj.message + '</p>');

            return marker = new mapboxgl.Marker()
                .setLngLat(coordinates)
                .addTo(map)
                .setPopup(popup);
        });
    }

    // for (var i=0; i < eats.length; i +=1) {
    //     placeMarkerAndPopup(eats[i], mapboxglAccessToken, map);
    // }

    eats.forEach(function(restaurant) {
        placeMarkerAndPopup(restaurant, mapboxglAccessTokenToken, map);
    });



    // });


</script>
</body>
</html>